(()=>{var e={603:e=>{const t=e=>{document.getElementById("errorMessage").textContent=e,document.getElementById("loginMessage").classList.remove("hidden")};e.exports={handleError:t,sendPost:async(e,n,a)=>{const s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),o=await s.json();document.getElementById("loginMessage").classList.add("hidden"),o.redirect&&(window.location=o.redirect),o.error&&t(o.error),a&&a(o)},hideError:()=>{document.getElementById("loginMessage").classList.add("hidden")}}}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}(()=>{const e=n(603),t=io(),a=e=>{if(0===e.messages.length)return React.createElement("div",{className:"messageList"},React.createElement("h3",{className:"empty"},"Nothing has been posted yet."));const t=e.messages.map((e=>React.createElement("div",{key:e._id,id:"messageElement"},React.createElement("p",{className:"postedBy"},"Posted by: ",e.postedBy," "),React.createElement("p",{className:"message"}," ",e.messageText," "),React.createElement("p",{className:"postedDate"}," Posted On: ",e.createdDate," "))));return React.createElement("div",{className:"messageList"},t)},s=()=>{const e=Math.floor(2*Math.random())+1;return React.createElement("img",{src:`assets/img/ads/hubsworthParodyAd${e}.png`})},o=()=>React.createElement("img",{id:"hubText",src:"/assets/img/hubsworthText.png",alt:"logoText"}),r=()=>React.createElement("div",{id:"instructText"},React.createElement("h3",null,"Welcome to Hubsworth, your one stop shop for social media gatherings."),React.createElement("p",null,"Start by selecting a channel to send a message to, and anyone viewing the channel will see what you posted once they load onto the app.")),c=async e=>{const t=await fetch(`/getMessages?channel=${e}`),n=await t.json();ReactDOM.render(React.createElement(a,{messages:n.messages}),document.getElementById("oldMessages"))};window.onload=async()=>{const n=await fetch("/getToken");await n.json(),ReactDOM.render(React.createElement(o,null),document.getElementById("logo")),ReactDOM.render(React.createElement(r,null),document.getElementById("instructions")),ReactDOM.render(React.createElement(s,null),document.getElementById("adSpot")),(()=>{const n=document.getElementById("editForm"),a=document.getElementById("editBox"),s=document.getElementById("channelSelect");n.addEventListener("submit",(n=>{if(n.preventDefault(),e.hideError(),""==a.value)return e.handleError("Fill in the field before submitting, please."),!1;{const e={message:a.value,channel:s.value};t.emit("chat message",e),a.value=""}c(`${s.value}`)}))})(),t.on("general",c("general")),(()=>{const e=document.getElementById("channelSelect"),n=document.getElementById("newMessages");e.addEventListener("change",(()=>{switch(n.innerHTML="",e.value){case"memes":t.off("general"),t.off("songs"),t.on("memes",c),c("memes");break;case"general":t.off("memes"),t.off("songs"),t.on("general",c),c("general");break;default:t.off("general"),t.off("memes"),t.on("songs",c),c("songs")}}))})(),c("general")}})()})();