(()=>{var e={603:e=>{const t=e=>{document.getElementById("errorMessage").textContent=e,document.getElementById("loginMessage").classList.remove("hidden")};e.exports={handleError:t,sendPost:async(e,s,n)=>{const a=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),o=await a.json();document.getElementById("loginMessage").classList.add("hidden"),o.redirect&&(window.location=o.redirect),o.error&&t(o.error),n&&n(o)},hideError:()=>{document.getElementById("loginMessage").classList.add("hidden")}}}},t={};function s(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,s),o.exports}(()=>{const e=s(603),t=io(),n=e=>{const t=document.createElement("div");t.id="messageElement",t.innerText=e,document.getElementById("messages").appendChild(t)},a=e=>{if(0===e.messages.length)return React.createElement("div",{className:"messageList"},React.createElement("h3",{className:"empty"},"Nothing has been posted yet."));const t=e.messages.map((e=>React.createElement("div",{key:e._id,id:"messageElement"},React.createElement("p",{className:"postedBy"}," ",e.postedBy," "),React.createElement("p",{className:"message"}," ",e.messageText," "))));return React.createElement("div",{className:"messageList"},t)},o=async e=>{const t=await fetch(`/getMessages?channel=${e}`),s=await t.json();console.log(s),ReactDOM.render(React.createElement(a,{messages:s.messages}),document.getElementById("oldMessages"))};window.onload=async()=>{const s=await fetch("/getToken");await s.json(),(()=>{const s=document.getElementById("editForm"),n=document.getElementById("editBox"),a=document.getElementById("channelSelect");s.addEventListener("submit",(s=>{if(s.preventDefault(),e.hideError(),""==n.value)return e.handleError("Fill in the field before submitting, please."),!1;{const e={message:n.value,channel:a.value};t.emit("chat message",e),n.value=""}}))})(),t.on("general",n),(()=>{const e=document.getElementById("channelSelect"),s=document.getElementById("newMessages");e.addEventListener("change",(()=>{switch(s.innerHTML="",e.value){case"memes":t.off("general"),t.off("songs"),t.on("memes",n),o("memes");break;case"general":t.off("memes"),t.off("songs"),t.on("general",n),o("general");break;default:t.off("general"),t.off("memes"),t.on("songs",n),o("songs")}}))})(),o("general");let a=document.createElement("img");const d=Math.floor(2*Math.random())+1;a.setAttribute("src",`assets/img/ads/hubsworthParodyAd${d}.png`),document.getElementById("adSpot").appendChild(a)}})()})();